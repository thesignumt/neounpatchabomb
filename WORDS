_G.wordbomb = {}
_G.wordbomb.used = {}

loadstring(game:HttpGet("https://raw.githubusercontent.com/sigmacodeslol/neounpatchabomb/refs/heads/master/englishwords"))()
loadstring(game:HttpGet("https://raw.githubusercontent.com/sigmacodeslol/neounpatchabomb/refs/heads/master/periodictable"))()
loadstring(game:HttpGet("https://raw.githubusercontent.com/sigmacodeslol/neounpatchabomb/refs/heads/master/longwords"))()
loadstring(game:HttpGet("https://raw.githubusercontent.com/sigmacodeslol/neounpatchabomb/refs/heads/master/MUSTUSE"))()
loadstring(game:HttpGet("https://raw.githubusercontent.com/sigmacodeslol/neounpatchabomb/refs/heads/master/hyphens"))()

function merge_lists(...)
	local merged_list = {}
	local seen = {}
	for _, list in ipairs({ ... }) do
		for _, item in ipairs(list) do
			if not seen[item] then
				table.insert(merged_list, item)
				seen[item] = true
			end
		end
  end
	return merged_list
end


local wb = _G.wordbomb
wb.small = merge_lists(wb.ENGLISH_WORDS, wb.MUSTUSE, wb.PERIODIC, wb.LONGW, wb.HYPHENATED)
wb.long = merge_lists(wb.LONGW, wb.MUSTUSE, wb.HYPHENATED, wb.ENGLISH_WORDS, wb.PERIODIC)
wb.hyphen = merge_lists(wb.HYPHENATED, wb.LONGW, wb.MUSTUSE, wb.PERIODIC, wb.ENGLISH_WORDS)
wb.current = wb.small

function wb.set_dict(dname)
	local dnames = {"small", "long", "hyphen"}
	if not (wb.has(dname, dnames) or type(dname) == "string") then
		return
	end
	wb.current = wb[dname]
end

function wb.has(val, spec)
	spec = spec or {}
	for i, v in pairs((spec and spec) or wb.used) do
		if v == val then
			return true
		end
	end
	return false
end

function wb.find(str)
	print('find')
	print(str)
	print('checking hyphen')
	local hyphen = string.sub(str, 1, 1) == "-"
	if hyphen == true then
		local str = string.sub(str, 2)
		print(str)
	end

	local found = nil
	for i, v in ipairs(hyphen and wb.HYPHENATED or wb[wb.current]) do
		if
			string.find(v, str:lower())
			and not wb.has(v)
		then
			found = v
			table.insert(wb.used, v)
			break
		end
	end
	return found
end

return wb
